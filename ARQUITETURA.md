# ğŸ—ï¸ Arquitetura da SoluÃ§Ã£o

## ğŸ“ Diagrama de Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CLIENTE (Browser/App)                    â”‚
â”‚                      Swagger / Postman                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”‚ HTTP/HTTPS
                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ASP.NET Core Web API                      â”‚
â”‚                         (.NET 8.0)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚              CONTROLLERS (Camada API)              â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚  V1/UsuariosController  â”‚  V2/UsuariosController   â”‚     â”‚
â”‚  â”‚  V1/TrilhasController   â”‚  V2/TrilhasController    â”‚     â”‚
â”‚  â”‚                                                     â”‚     â”‚
â”‚  â”‚  âœ… Versionamento: /api/v1/ e /api/v2/            â”‚     â”‚
â”‚  â”‚  âœ… Status Codes: 200, 201, 204, 400, 404, 422    â”‚     â”‚
â”‚  â”‚  âœ… Verbos HTTP: GET, POST, PUT, DELETE           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                 DTOs (ValidaÃ§Ã£o)                   â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚  â€¢ UsuarioCreateDto, UsuarioUpdateDto             â”‚     â”‚
â”‚  â”‚  â€¢ TrilhaCreateDto, TrilhaUpdateDto               â”‚     â”‚
â”‚  â”‚                                                     â”‚     â”‚
â”‚  â”‚  âœ… Data Annotations                               â”‚     â”‚
â”‚  â”‚  âœ… ValidaÃ§Ãµes de campos                           â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â”‚                                   â”‚
â”‚                          â–¼                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         ApplicationDbContext (EF Core)             â”‚     â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”‚
â”‚  â”‚  â€¢ DbSet<Usuario>                                  â”‚     â”‚
â”‚  â”‚  â€¢ DbSet<Trilha>                                   â”‚     â”‚
â”‚  â”‚  â€¢ DbSet<Competencia>                              â”‚     â”‚
â”‚  â”‚  â€¢ DbSet<Matricula>                                â”‚     â”‚
â”‚  â”‚  â€¢ DbSet<TrilhaCompetencia>                        â”‚     â”‚
â”‚  â”‚                                                     â”‚     â”‚
â”‚  â”‚  âœ… Migrations                                      â”‚     â”‚
â”‚  â”‚  âœ… Seed Data                                       â”‚     â”‚
â”‚  â”‚  âœ… Relacionamentos N:N                             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                          â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Entity Framework Core
                           â”‚ Pomelo MySQL Provider
                           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MySQL 8.0                               â”‚
â”‚                   (Docker Container)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“Š Database: gscsharp_db                                    â”‚
â”‚                                                               â”‚
â”‚  Tables:                                                      â”‚
â”‚  â€¢ usuarios                                                   â”‚
â”‚  â€¢ trilhas                                                    â”‚
â”‚  â€¢ competencias                                               â”‚
â”‚  â€¢ matriculas                                                 â”‚
â”‚  â€¢ trilha_competencia                                         â”‚
â”‚                                                               â”‚
â”‚  âœ… Port: 3306                                                â”‚
â”‚  âœ… User: gscsharp_user                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Fluxo de RequisiÃ§Ã£o

### Exemplo: Criar UsuÃ¡rio (POST /api/v1/usuarios)

```
1. Cliente envia POST /api/v1/usuarios
   â””â”€> JSON: { "nome": "JoÃ£o", "email": "joao@email.com", ... }

2. ASP.NET Core recebe a requisiÃ§Ã£o
   â””â”€> Roteamento identifica V1/UsuariosController

3. Controller recebe UsuarioCreateDto
   â””â”€> ValidaÃ§Ãµes automÃ¡ticas (Data Annotations)

4. Se vÃ¡lido:
   â””â”€> Controller cria entidade Usuario
   â””â”€> Adiciona ao DbSet<Usuario>
   â””â”€> SaveChangesAsync()

5. Entity Framework Core
   â””â”€> Gera SQL INSERT
   â””â”€> Executa no MySQL

6. MySQL
   â””â”€> Insere registro
   â””â”€> Retorna ID gerado

7. Controller retorna 201 Created
   â””â”€> Location Header: /api/v1/usuarios/{id}
   â””â”€> Body: UsuarioResponseDto

8. Cliente recebe resposta
   â””â”€> Status 201 + dados do usuÃ¡rio criado
```

## ğŸ”— Relacionamentos entre Entidades

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Usuario   â”‚         â”‚   Trilha    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Id          â”‚         â”‚ Id          â”‚
â”‚ Nome        â”‚         â”‚ Nome        â”‚
â”‚ Email       â”‚         â”‚ Nivel       â”‚
â”‚ ...         â”‚         â”‚ ...         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                       â”‚
       â”‚ 1:N                N:1 â”‚
       â”‚                       â”‚
       â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
       â””â”€â”€â”€â”€â”€â”€â”¤Matricula â”œâ”€â”€â”€â”€â”€â”˜
              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
              â”‚ Id       â”‚
              â”‚UsuarioId â”‚
              â”‚ TrilhaId â”‚
              â”‚ Status   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    N:N    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Trilha    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Competencia  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Id          â”‚            â”‚ Id           â”‚
â”‚ Nome        â”‚            â”‚ Nome         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ Categoria    â”‚
       â–²                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ TrilhaCompetencia
       â”‚ (Tabela Associativa)
```

## ğŸ“‹ Camadas da AplicaÃ§Ã£o

| Camada | Responsabilidade | Arquivos |
|--------|------------------|----------|
| **Controllers** | Receber requisiÃ§Ãµes HTTP, validar entrada, retornar respostas | V1/UsuariosController.cs<br>V1/TrilhasController.cs<br>V2/UsuariosController.cs<br>V2/TrilhasController.cs |
| **DTOs** | TransferÃªncia de dados com validaÃ§Ãµes | UsuarioDto.cs<br>TrilhaDto.cs |
| **Models** | Entidades do domÃ­nio | Usuario.cs<br>Trilha.cs<br>Competencia.cs<br>Matricula.cs<br>TrilhaCompetencia.cs |
| **Data** | Contexto do banco, configuraÃ§Ãµes EF | ApplicationDbContext.cs |
| **Migrations** | Versionamento do schema do banco | InitialCreate.cs |

## ğŸ¯ Versionamento da API

### VersÃ£o 1 (v1) - BÃ¡sica
- Endpoints simples CRUD
- Retorna apenas dados da entidade principal
- Ideal para operaÃ§Ãµes simples

### VersÃ£o 2 (v2) - Expandida
- Retorna dados com relacionamentos
- UsuÃ¡rios incluem suas matrÃ­culas
- Trilhas incluem suas competÃªncias
- Melhor para dashboards e visÃµes completas

## ğŸ” Status Codes Utilizados

| CÃ³digo | Significado | Quando Usar |
|--------|-------------|-------------|
| **200 OK** | Sucesso | GET, PUT bem-sucedidos |
| **201 Created** | Recurso criado | POST bem-sucedido |
| **204 No Content** | Sucesso sem retorno | DELETE bem-sucedido |
| **400 Bad Request** | Dados invÃ¡lidos | Falha na validaÃ§Ã£o |
| **404 Not Found** | Recurso nÃ£o existe | ID nÃ£o encontrado |
| **422 Unprocessable** | Regra de negÃ³cio | Email duplicado, etc. |

## ğŸ› ï¸ Tecnologias e VersÃµes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Runtime                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ .NET 8.0                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frameworks                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ASP.NET Core 8.0                         â”‚
â”‚ Entity Framework Core 8.0                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Pacotes NuGet                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Swashbuckle.AspNetCore 6.6.2             â”‚
â”‚ Pomelo.EntityFrameworkCore.MySql 8.0.0   â”‚
â”‚ Microsoft.AspNetCore.Mvc.Versioning 5.1.0â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Banco de Dados                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MySQL 8.0 (Docker)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ Estrutura de Pastas

```
GSCSHARP/
â”‚
â”œâ”€â”€ ğŸ“ Controllers/           # Endpoints da API
â”‚   â”œâ”€â”€ ğŸ“ V1/               # VersÃ£o 1
â”‚   â”‚   â”œâ”€â”€ UsuariosController.cs
â”‚   â”‚   â””â”€â”€ TrilhasController.cs
â”‚   â””â”€â”€ ğŸ“ V2/               # VersÃ£o 2
â”‚       â”œâ”€â”€ UsuariosController.cs
â”‚       â””â”€â”€ TrilhasController.cs
â”‚
â”œâ”€â”€ ğŸ“ Data/                 # Contexto do EF Core
â”‚   â””â”€â”€ ApplicationDbContext.cs
â”‚
â”œâ”€â”€ ğŸ“ DTOs/                 # Data Transfer Objects
â”‚   â”œâ”€â”€ UsuarioDto.cs
â”‚   â””â”€â”€ TrilhaDto.cs
â”‚
â”œâ”€â”€ ğŸ“ Migrations/           # Migrations do EF Core
â”‚   â”œâ”€â”€ 20251111000000_InitialCreate.cs
â”‚   â””â”€â”€ ApplicationDbContextModelSnapshot.cs
â”‚
â”œâ”€â”€ ğŸ“ Models/               # Entidades do domÃ­nio
â”‚   â”œâ”€â”€ Usuario.cs
â”‚   â”œâ”€â”€ Trilha.cs
â”‚   â”œâ”€â”€ Competencia.cs
â”‚   â”œâ”€â”€ Matricula.cs
â”‚   â””â”€â”€ TrilhaCompetencia.cs
â”‚
â”œâ”€â”€ ğŸ“„ Program.cs            # ConfiguraÃ§Ã£o da aplicaÃ§Ã£o
â”œâ”€â”€ ğŸ“„ appsettings.json      # ConfiguraÃ§Ãµes (connection string)
â””â”€â”€ ğŸ“„ GSCSHARP.csproj       # Arquivo do projeto
```

---

**ğŸ’¡ Dica:** Este diagrama foi criado para facilitar o entendimento da arquitetura. Use-o na apresentaÃ§Ã£o do vÃ­deo!
